{% include "admin-header.html" with page_title="Book List | BookQuest" %}
<meta name="viewport" content="width=1080px">
    <section>
        <div class="container">
            <div class="box" style="flex-direction: column;">
                <div class="admin-search-container">
                    <div class="form-field" style="width: 50%;">
                        <input type="text" name="" id="book_transaction_src" onkeyup="searchTable(this.value)"
                            placeholder="Enter Book Id to search">
                    </div>
                    <div>
                        <a href="add-book" class="action-button blue link">Add New Book</a>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>Book ID</th>
                            <th>Title</th>
                            <th>Author</th>
                            <th>Publication</th>
                            <th>Subject</th>
                        </tr>

                        {% for book in books %}
                            <tr onclick="window.location='{{book.id}}';">
                                <td>{{book.id}}</td>
                                <td>{{book.title}}</td>
                                <td>{{book.author}}</td>
                                <td>{{book.publication}}</td>
                                <td>{{book.subject.name}}</td>
                            </tr>
                        {% endfor %}

                    </table>
                </div>
            </div>
        </div>
    </section>

    <script>
        function searchTable(book_id) {
            let a = document.querySelectorAll("tr")

            for (let i = 1; i < a.length; i++) {

                let td = a[i].getElementsByTagName("td")[0]
                if (td.innerText.includes(book_id)) {
                    a[i].style.display = "";
                }
                else {
                    a[i].style.display = "none";
                }
            }
        }
    </script>

</body>
</html>
